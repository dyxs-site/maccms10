<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>{$title}</title>
    <link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/layui/2.6.8/css/layui.css">
    <link rel="stylesheet" href="__STATIC__/css/admin_style.css?v=1024">
    <script type="text/javascript" src="__STATIC__/js/jquery.js?v=1024"></script>
    <script type="text/javascript" src="__STATIC__/js/jquery.clipboard.js?v=1024"></script>
    <script type="text/javascript" src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/layui/2.6.8/layui.js"></script>
    <script>
        var ROOT_PATH="__ROOT__",ADMIN_PATH="{$_SERVER['SCRIPT_NAME']}", MAC_VERSION='v10';
    </script>
</head>
<body>
<style>
@media screen and (max-width:768px){
	.layui-content,.layui-contentAD {white-space:nowrap;overflow:scroll;position:relative;width:100%;}
	.layui-contentAD td{float: left;width: 100%;}
}
</style>
<div class="p10">
    <div class="showpic" style="display:none;">
        <img class="showpic_img" style="width:100%;height:100%;" referrerPolicy="no-referrer"></div>
    <form class="layui-form layui-form-pane" name="configform" id="configform">
        <div class="layui-tab" lay-filter="dmku" overflow>
            <ul class="layui-tab-title">
                <li class="layui-this">基本设置</li>
                <li class="">广告设置</li>
				<li class="">使用教程</li>
				</ul>
            <div class="layui-tab-content">
                <div class="layui-tab-item layui-show" name="基本设置">
                    <blockquote class="layui-elem-quote layui-quote-nm">
                        <p>温馨提示：</p>
                        <p>本播放器基于Aliplayer播放器开发，官网：https://player.alicdn.com/aliplayer/index.html，此款播放器只适合在网页端使用，不支持在APP里面使用</p>
                        <p style="color:red;">一些功能在移动端不会生效，因为部分移动端浏览器会劫持播放器，替换为浏览器自带的播放器。</p>
                    </blockquote>
                    <fieldset class="layui-elem-field">
                        <legend>基本设置</legend>
                        <div class="layui-field-box">
                            <div class="layui-form-item">
                                <label class="layui-form-label">视频封面</label>
                                <div class="layui-input-inline long">
                                    <input type="text" name="yzm[pic]" value="{$yzm.pic}" class="layui-input upload-input  upload-img" placeholder="图片地址"></div>
									<div class="layui-form-mid layui-word-aux">视频加载时的预览图片，可以不设置，需为http开头的图片地址</div>
                            </div>						
							<div class="layui-form-item">
                                <label class="layui-form-label">自动播放</label>
                                <div class="layui-input-inline">
                                    <input type="checkbox" name="yzm[autoplay]" lay-skin="switch"  lay-filter="switchTest" lay-text="开|关" {if condition="$yzm.autoplay eq 'on'" }checked{/if}></div>
                                <div class="layui-form-mid layui-word-aux">播放器是否自动播放，在移动端和谷歌浏览器中自动播放设置会失效。</div></div>
							<div class="layui-form-item">
                                <label class="layui-form-label">记忆播放</label>
                                <div class="layui-input-inline">
                                    <input type="checkbox" name="yzm[history][status]" lay-skin="switch" lay-text="开|关" {if condition="$yzm.history.status eq 'on'" }checked{/if}>
									
								</div>
								<div class="layui-input-inline">
								<select name="yzm[history][type]">
									<option value="0" {if condition="$yzm.history.type eq 0"}selected {/if}>手动选择是否跳转到上次观看位置</option>
									<option value="1" {if condition="$yzm.history.type eq 1"}selected {/if}>自动跳转到上次观看位置</option>
									</select>
								</div>	
                                <div class="layui-form-mid layui-word-aux">开启记忆播放后，刷新播放后可自动跳转到记忆位置或手动选择跳转到记忆播放位置</div></div>
							<div class="layui-form-item">
                                <label class="layui-form-label">试看</label>
                                <div class="layui-input-inline">
                                    <input type="number" name="yzm[try][time]" value="{$yzm.try.time|default=0}" class="layui-input" placeholder="非会员可试看多少秒" ></div>
								<label class="layui-form-label">完整观看会员组</label>
                            <div class="layui-input-inline">
                                <select name="yzm[try][group]">
									{volist name="group" id="vo"}
										{if condition="$vo['group_id']>1"}
										<option value="{$vo.group_id}" {if condition="$yzm.try.group eq $vo['group_id']"}selected {/if}>{$vo.group_name}</option>
										{/if}
									{/volist}
								</select>
                        </div>
						
                                <div class="layui-form-mid layui-word-aux">若设置为0则不开启试看，可选择哪个会员组可看完整视频</div></div>

							



                        </div>
                    </fieldset>
                   
                    <div class="layui-form-item">
                        <div class="center">
                            <button class="layui-btn" type="button" lay-submit="" lay-filter="save">立 即 保 存</button></div>
                    </div>
                </div>
                <div class="layui-tab-item" name="广告设置">
					<div class="layui-form-item">
                        <label class="layui-form-label">免广告权限</label>
                            <div class="layui-input-inline">
                                <select name="yzm[ads][group]">
									<option value="" >请选择</option>
									{volist name="group" id="vo"}
										{if condition="$vo['group_id']>1"}
										<option value="{$vo.group_id}" {if condition="$yzm.ads.group eq $vo['group_id']"}selected {/if}>{$vo.group_name}</option>
										{/if}
									{/volist}
								</select>
                        </div>
                        <div class="layui-form-mid layui-word-aux">选择哪个等级的会员可以免看广告</div></div>
						
					<fieldset class="layui-elem-field">
                        <legend>前置广告设置</legend>
					<div class="layui-field-box">						
						
						
                    <div class="layui-form-item">
                        <label class="layui-form-label">前置广告开关</label>
                        <div class="layui-input-inline">
                            <input type="checkbox" name="yzm[ads][pre][state]" lay-skin="switch" lay-text="开|关" {if condition="$yzm.ads.pre.state eq 'on'" }checked{/if}>
                        </div>
						<div class="layui-form-mid layui-word-aux">只支持PC端显示前置广告，移动端有部分浏览器支持，大部分不支持显示。</div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">前置广告类型</label>
                        <div class="layui-input-inline">
                            <input type="radio" name="yzm[ads][pre][type]" lay-filter="adsType" value="1" title="视频" {if condition="$yzm.ads.pre.type neq '2'" }checked{/if}>
                            <input type="radio" name="yzm[ads][pre][type]" lay-filter="adsType" value="2" title="图片" {if condition="$yzm.ads.pre.type eq '2'" }checked{/if}></div>
							
                    </div>

                    <div id="adsvod" {if condition="$yzm.ads.pre.type eq '2'" }style="display:none;" {/if}>
                        <div class="layui-form-item">
                            <label class="layui-form-label">视频广告内容</label>
                            <div class="layui-input-inline long">
                                <input type="text" name="yzm[ads][pre][vod_url]" value="{$yzm.ads.pre.vod_url}" class="layui-input upload-input" placeholder="视频地址"></div>
                            <div class="layui-form-mid layui-word-aux">视频地址,支持mp4或者m3u8直链</div></div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">视频广告链接</label>
                            <div class="layui-input-inline long">
                                <input type="text" name="yzm[ads][pre][vod_link]" value="{$yzm.ads.pre.vod_link}"  class="layui-input upload-input" placeholder="点击链接地址"></div>
                            <div class="layui-form-mid layui-word-aux">点击视频跳转链接地址</div></div>
                    </div>
                    <div id="adspic" {if condition="$yzm.ads.pre.type neq '2'" }style="display:none;" {/if}>
                        <div class="layui-form-item">
                            <label class="layui-form-label">图片广告时间</label>
                            <div class="layui-input-inline">
                                <input type="text" name="yzm[ads][pre][pic][time]" value="{$yzm.ads.pre.pic.time|default=5}" class="layui-input upload-input" placeholder="单位/秒"></div>
                            <div class="layui-form-mid layui-word-aux">图片广告默认显示时间</div></div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">图片广告内容</label>
                            <div class="layui-input-inline long">
                                <input type="text" name="yzm[ads][pre][pic][img]" value="{$yzm.ads.pre.pic.img}"  class="layui-input upload-input  upload-img" placeholder="图片地址"></div>
                            <div class="layui-form-mid layui-word-aux">广告图片链接，支持jpg、png、gif格式的图片</div></div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">图片广告链接</label>
                            <div class="layui-input-inline long">
                                <input type="text" name="yzm[ads][pre][pic][link]" value="{$yzm.ads.pre.pic.link}"  class="layui-input upload-input" placeholder="点击链接地址"></div>
                            <div class="layui-form-mid layui-word-aux">图片广告点击后跳转地址</div></div>
                    </div>
					
					</div></fieldset>
					
					<fieldset class="layui-elem-field">
                        <legend>暂停广告设置</legend>
					<div class="layui-field-box">
					
                    <div class="layui-form-item">
                        <label class="layui-form-label">暂停广告开关</label>
                        <div class="layui-input-inline">
                            <input type="checkbox" name="yzm[ads][pause][state]" lay-skin="switch"  lay-text="开|关" {if condition="$yzm.ads.pause.state eq 'on'" }checked{/if}>
                        </div>
					</div>
					
                    <div class="layui-form-item">
                        <label class="layui-form-label">暂停图片链接</label>
                        <div class="layui-input-inline long">
                            <input type="text" name="yzm[ads][pause][pic]" value="{$yzm.ads.pause.pic}"  class="layui-input upload-input  upload-img" placeholder="图片地址"></div>
                        <div class="layui-form-mid layui-word-aux">暂停广告图片链接</div></div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">暂停跳转链接</label>
                        <div class="layui-input-inline long">
                            <input type="text" name="yzm[ads][pause][link]" value="{$yzm.ads.pause.link}"  class="layui-input upload-input" placeholder="点击链接地址"></div>
                        <div class="layui-form-mid layui-word-aux">暂停图片广告点击后跳转地址</div></div>
						
					</div></fieldset>
					
					<fieldset class="layui-elem-field">
                        <legend>跑马灯广告设置</legend>
					<div class="layui-field-box">
					
                    <div class="layui-form-item">
                        <label class="layui-form-label">跑马灯开关</label>
                        <div class="layui-input-inline">
                            <input type="checkbox" name="yzm[ads][text][state]" lay-skin="switch"  lay-text="开|关" {if condition="$yzm.ads.text.state eq 'on'" }checked{/if}>
                        </div>
						<div class="layui-form-mid layui-word-aux">跑马灯广告开启后，会一直循环在播放器内显示</div>
					</div>
					<div class="layui-form-item">
                        <label class="layui-form-label">跑马灯内容</label>
                        <div class="layui-input-inline long">
                            <input type="text" name="yzm[ads][text][content]" value="{$yzm.ads.text.content}"  class="layui-input" placeholder="请输入文字广告内容"></div>
                        <div class="layui-form-mid layui-word-aux">请输入跑马灯文字广告内容</div></div>
					<div class="layui-form-item">
                        <label class="layui-form-label">文字颜色</label>
                        <div class="layui-input-inline long">
                            <input type="text" name="yzm[ads][text][color]" value="{$yzm.ads.text.color|default='#00c1de'}"  class="layui-input" placeholder="跑马灯广告文字颜色"></div>
                        <div class="layui-form-mid layui-word-aux">跑马灯文字广告的颜色</div></div>
					<div class="layui-form-item">
                        <label class="layui-form-label">文字大小</label>
                        <div class="layui-input-inline long">
                            <input type="text" name="yzm[ads][text][size]" value="{$yzm.ads.text.size|default='16px'}"  class="layui-input" placeholder="跑马灯广告文字大小"></div>
                        <div class="layui-form-mid layui-word-aux">跑马灯广告文字大小</div></div>
					<div class="layui-form-item">
                        <label class="layui-form-label">跑马灯速度</label>
                        <div class="layui-input-inline long">
                            <input type="number" min="10" name="yzm[ads][text][time]" value="{$yzm.ads.text.time}"  class="layui-input" placeholder="单位秒"></div>
                        <div class="layui-form-mid layui-word-aux">请输入跑马灯文字广告显示速度 单位秒</div></div>	
					<div class="layui-form-item">
                        <label class="layui-form-label">显示位置</label>
                            <div class="layui-input-inline">
                                <select name="yzm[ads][text][seat]">
									<option value="top" {if condition="$yzm.ads.text.seat eq 'top'"}selected {/if}>顶部</option>
									<option value="bottom" {if condition="$yzm.ads.group eq 'bottom'"}selected {/if}>底部</option>
									<option value="random" {if condition="$yzm.ads.group eq 'random'"}selected {/if}>随机</option>
								</select>
                        </div>
                        <div class="layui-form-mid layui-word-aux">跑马灯广告显示在播放器内哪个位置</div></div>
						
					</div>
					</fieldset>
					
                    <div class="layui-form-item center">
                        <div>
                            <button class="layui-btn" type="button" lay-submit="" lay-filter="save">立 即 保 存</button></div>
                    </div>
                </div>
                <div class="layui-tab-item" name="调用教程">
                    <blockquote class="layui-elem-quote layui-quote-nm">
						<p>以下是手动调用此款播放器的教程：</p>
						<p>第一步，导航栏上找到“视频”-“播放器”</p>
						<p>第二步，选择指定的播放器，点击“编辑”</p>
						<p>第三步，在弹出的窗口中，选择切换到“播放器代码”</p>
						<p>第四步，复制下方的调用代码，粘贴到“播放器代码”中保存即可</p>
						<p>第五步，一定要清理清理浏览器缓存，否则可能前端不能实时显示</p>
					</blockquote>
					<div class="layui-form-item">
						<label class="layui-form-label">调用代码</label>
						<div class="layui-input-block">
							<textarea class="layui-textarea">MacPlayer.Html='<iframe width="100%" height="'+MacPlayer.Height+'" src="/static/player/cj/aliplayer-ads.html" frameborder="0" allowfullscreen="true" border="0" marginwidth="0" marginheight="0" scrolling="no"></iframe>';MacPlayer.Show();</textarea>
						</div>    
					</div>
                </div>

            </div>
        </div>
    </form>
</div>

{include file="../../../application/admin/view/public/foot" /}

<script type="text/javascript">
install_dir = "{$GLOBALS['config']['site']['install_dir']}";
layui.use(['form', 'laydate', 'laypage', 'table', 'layer', 'element', 'colorpicker'], function() {
	var laydate = layui.laydate,
		laypage = layui.laypage,
		layer = layui.layer,
		table = layui.table,
		element = layui.element,
		form = layui.form,
		laytpl = layui.laytpl,
		colorpicker = layui.colorpicker;

	form.on('radio(adsType)', function(data) {
		if (data.value == 1) {
			$("#adsvod").show();
			$("#adspic").hide()
		} else {
			$("#adspic").show();
			$("#adsvod").hide()
		}
	});
	form.on('submit(save)', function(data) {
		layer.msg('正在提交', {
			time: 30000,
			shade: 0.6,
			icon: 16
		});
		$.ajax({
			type: 'POST',
			data: data.field,
			dataType: 'json',
			url: './set',
			success: function(data) {
				layer.msg('保存完成', {
					time: 1000,
					icon: 1
				})
			}
		});
		return false
	});
	
	$('.upload-img').hover(function(e) {
		var e = window.event || e;
		var imgsrc = $(this).val();
		if (imgsrc.trim() == "") {
			return
		}
		var left = e.clientX + document.body.scrollLeft + 20;
		var top = e.clientY + document.body.scrollTop + 20;
		$(".showpic").css({
			'left': left,
			'top': top,
			'width': "300px",
			'height': "200px",
			'display': ""
		});
		$(".showpic_img").attr("src", imgsrc)
	}, function(e) {
		$(".showpic").css("display", "none")
	})
});
</script>

</body>
</html>